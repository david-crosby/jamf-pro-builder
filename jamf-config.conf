# ============================================================================
# Jamf Pro Tenancy Configuration File
# ============================================================================
# This file contains all the configuration parameters required to build out
# a Jamf Pro tenancy from scratch. Update these values before running the
# main setup script.
# ============================================================================

# ----------------------------------------------------------------------------
# Jamf Pro Instance Configuration
# ----------------------------------------------------------------------------
# The base URL of your Jamf Pro instance (e.g., https://yourcompany.jamfcloud.com)
JAMF_URL=""

# API Client credentials (these will be created manually first)
# Client ID and Secret for OAuth authentication
JAMF_CLIENT_ID=""
JAMF_CLIENT_SECRET=""

# ----------------------------------------------------------------------------
# SSO Configuration
# ----------------------------------------------------------------------------
# Enable SSO for user authentication
ENABLE_SSO="true"

# SSO Provider type (SAML, Azure AD, Okta, Google, OneLogin)
SSO_PROVIDER="SAML"

# SAML Configuration (if using SAML)
SAML_ENTITY_ID=""
SAML_IDP_METADATA_URL=""
SAML_SSO_URL=""
SAML_ENTITY_CERTIFICATE=""

# Azure AD Configuration (if using Azure AD)
AZURE_TENANT_ID=""
AZURE_CLIENT_ID=""
AZURE_CLIENT_SECRET=""

# ----------------------------------------------------------------------------
# Mail Server Configuration
# ----------------------------------------------------------------------------
# SMTP server configuration for notifications
MAIL_SERVER_ADDRESS=""
MAIL_SERVER_PORT="587"
MAIL_SENDER_EMAIL=""
MAIL_USE_TLS="true"

# SMTP Authentication
MAIL_USERNAME=""
MAIL_PASSWORD=""

# ----------------------------------------------------------------------------
# Automated Device Enrolment (ADE) Configuration
# ----------------------------------------------------------------------------
# ADE server token file path (.p7m file from Apple Business Manager)
ADE_TOKEN_FILE_PATH=""

# ADE instance display name in Jamf Pro
ADE_INSTANCE_NAME="Primary ADE Server"

# macOS 26+ ADE enhancements
# Declarative Device Management (DDM) is now default for macOS 26
ADE_ENABLE_DDM="true"
ADE_DDM_AUTO_ACTIVATE="true"

# Rapid Security Response integration (macOS 26+)
ADE_ENABLE_RSR="true"

# Activation Lock enhancements for macOS 26
ADE_MANAGED_ACTIVATION_LOCK="true"

# ----------------------------------------------------------------------------
# PreStage Enrolment Configuration
# ----------------------------------------------------------------------------
# PreStage enrolment name
PRESTAGE_NAME="Default Zero Touch Deployment"

# Skip Setup Assistant screens
SKIP_SETUP_ASSISTANT_SCREENS="true"

# Setup Assistant options to skip
SKIP_ACCESSIBILITY="false"
SKIP_APPEARANCE="false"
SKIP_APPLE_ID="true"
SKIP_BIOMETRIC="false"
SKIP_DIAGNOSTICS="false"
SKIP_DISPLAY_TONE="false"
SKIP_LOCATION="true"
SKIP_PAYMENT="true"
SKIP_PRIVACY="true"
SKIP_REGISTRATION="true"
SKIP_RESTORE="false"
SKIP_SCREEN_TIME="true"
SKIP_SIRI="true"
SKIP_TOS="false"

# ----------------------------------------------------------------------------
# Jamf Connect Configuration
# ----------------------------------------------------------------------------
# Enable Jamf Connect for authentication
ENABLE_JAMF_CONNECT="true"

# Jamf Connect settings
JAMF_CONNECT_OIDC_PROVIDER=""
JAMF_CONNECT_CLIENT_ID=""
JAMF_CONNECT_REDIRECT_URI="https://127.0.0.1/jamfconnect"

# ----------------------------------------------------------------------------
# Platform SSO Configuration (macOS 13+, simplified in macOS 26)
# ----------------------------------------------------------------------------
# Enable Platform SSO (macOS 13+, enhanced in macOS 26 Tahoe)
ENABLE_PLATFORM_SSO="true"

# Platform SSO now uses simplified configuration in macOS 26+
# Automatically integrates with Jamf Pro's SSO settings
PLATFORM_SSO_AUTO_CONFIGURE="true"

# For manual configuration (legacy mode for macOS 13-15)
PLATFORM_SSO_TOKEN_URL=""
PLATFORM_SSO_CLIENT_ID=""
PLATFORM_SSO_EXTENSION_IDENTIFIER="com.apple.extensibility.platform-sso"

# macOS 26+ simplified settings
# Platform SSO now uses unified identity provider
PLATFORM_SSO_ACCOUNT_DISPLAY_NAME="${ORGANISATION_NAME}"
PLATFORM_SSO_USE_SHARED_DEVICE_KEYS="false"
PLATFORM_SSO_ENABLE_AUTHORIZATION="true"
PLATFORM_SSO_ENABLE_CREATE_USER_AT_LOGIN="true"

# ----------------------------------------------------------------------------
# Smart Groups Configuration
# ----------------------------------------------------------------------------
# macOS versions to create smart groups for
# Current and last 2 versions
MACOS_CURRENT_VERSION="26"
MACOS_CURRENT_NAME="Tahoe"

MACOS_PREVIOUS_VERSION_1="15"
MACOS_PREVIOUS_NAME_1="Sequoia"

MACOS_PREVIOUS_VERSION_2="14"
MACOS_PREVIOUS_NAME_2="Sonoma"

# ----------------------------------------------------------------------------
# CIS Benchmarks Configuration
# ----------------------------------------------------------------------------
# Enable CIS Level 1 and Level 2 benchmarks
ENABLE_CIS_LEVEL_1="true"
ENABLE_CIS_LEVEL_2="true"

# Enforcement mode: "monitor" or "enforce"
CIS_LEVEL_1_MODE="monitor"
CIS_LEVEL_2_MODE="monitor"

# ----------------------------------------------------------------------------
# User Accounts Configuration
# ----------------------------------------------------------------------------
# Standard user accounts to create in Jamf Pro
# Format: "username:fullname:email:privilege_set"
# Privilege sets: administrator, auditor, enrolment_only, custom
JAMF_USERS=(
    "admin:Administrator:admin@example.com:administrator"
    "readonly:Read Only:readonly@example.com:auditor"
)

# ----------------------------------------------------------------------------
# Organisational Settings
# ----------------------------------------------------------------------------
ORGANISATION_NAME=""
ORGANISATION_CONTACT_NAME=""
ORGANISATION_CONTACT_EMAIL=""
ORGANISATION_CONTACT_PHONE=""

# ----------------------------------------------------------------------------
# Additional Settings
# ----------------------------------------------------------------------------
# Enable automatic device name assignment
AUTO_DEVICE_NAMING="true"
DEVICE_NAME_PREFIX="MAC"

# Enable automatic inventory updates
AUTO_INVENTORY_UPDATE="true"
INVENTORY_UPDATE_FREQUENCY="86400" # Daily in seconds

# Enable push notifications
ENABLE_PUSH_NOTIFICATIONS="true"

# Log file location
LOG_FILE="/tmp/jamf-setup-$(date +%Y%m%d-%H%M%S).log"

# Dry run mode (set to "true" to test without making changes)
DRY_RUN="false"
